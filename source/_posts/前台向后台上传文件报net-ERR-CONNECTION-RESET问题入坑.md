---
title: '前台向后台上传文件报net::ERR_CONNECTION_RESET问题入坑'
date: 2017-12-11 22:23:33
categories: java
tags: java
---
近期接手了一个备课系统的项目，该项目的特点是前后端分离的架构；前端(nodejs)->后台(java);今天在扩展新功能时，前端上传调用后台的rest接口上传文件时，有一个很诡异的问题，当上传的文件小于30M时，可以正常上传；当上传的文件大于30M时，在浏览器下面(F12)就会报出了net::ERR_CONNECTION_RESET的错误，错误信息如下图：

![Alt text](http://soujava.com/images/bk.png)

<!--more-->

说实在话，这种错误还是第一次见到；当时一头雾水，然后开始排查后台代码，新添加了添加了大量的log调试信息，发现前台上传文件调用后台接口时，响应压根没有到达方法层级上面；然后继续排查是否有拦截器、过滤器等等做了前置处理；后来发现并没有的。

然后就想到应该是网关的限制问题，后来联系运维说明下相关的情况，让他们排查；没想到果然就是这个问题，是因为他们在NGINX的配置文件中设置了 **client_max_body_size** 参数值;后来运维把对应的大小调整了以后，就正常了！

>这是逼着走超级全栈路线的节凑啊




