---
title: 通过Nginx反向代理解决跨域问题
date: 2016-07-19 17:26:32
categories: Nginx
tags: 跨域
---
 有以下需求：

1. 有两个独立运行的系统，用户系统(user)、发布系统(publish)
2. publish系统中的添加内容功能模块需要选择对应的用户，那么user系统已经有了一个这样的页面，而publish系统想直接加载过来使用，并且勾选页面中的数据后可以获取已勾选的数据；
3. 因为两个系统部署在不同的服务器中运行，所以存在跨域问题
4. 解决方案主要通过反向代理的方式解决，这种方式可以避免两个系统更改大量的代码

![Alt text](http://soujava.com/images/kuayu.jpg)



**注**：以上方式可以解决publish系统远程调用user系统提供的数据页面(静态页面)的跨域问题，但是如果user系统提供的页面中有js异步事件，则仍然会出现跨域问题(比如在user系统提供的选择用户的界面中，当点击左侧角色分类时，异步加载右侧的用户列表数据)；所以需要user系统提供的视图页面对应的业务处理方法中做一些微小的改动即可，在响应对象中添加如下设置：
```java
	response.setHeader("Access-Control-Allow-Origin", "*");
```